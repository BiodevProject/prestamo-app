<html xmlns:th="http://www.thymeleaf.org"
      th:replace="fragments/layout :: layout(~{::content}, '/css/userEdit.css')"
      th:with="title='Información de factura'">
  <div th:fragment="content">

    <section class="info-panel" style="margin-top: 150px">
      <header class="panel-header">
        <h1>Información de la Factura</h1>
        <div class="subheader">
          <p>ID de la Factura: <strong th:text="${factura.id}">123</strong></p>
          <nav class="breadcrumb">
            <a href="/">Inicio</a> › 
            <a href="/factura/dashboard">Facturas</a> › 
            <span class="current">Información</span>
          </nav>
        </div>
      </header>

      <div class="info-section">
        <form th:action="@{/factura/update}" method="post" id="user-form">
          <input type="hidden" name="id" th:value="${factura.id}" />

          <div class="info-grid">
            <div class="info-block">
              <label for="fechaEmision">Fecha de emision</label>
              <input type="text" id="fechaEmision" name="fechaEmision" th:value="${factura.fechaEmision}" disabled required />
            </div>
            <div class="info-block">
              <label for="comprador">Comprador</label>
              <input type="text" id="comprador" name="comprador" th:value="${factura.comprador.nombre}" disabled required />
            </div>
            <div class="info-block">
              <label for="facturador">Vendedor</label>
              <input type="text" id="facturador" name="facturador" th:value="${factura.facturador.nombre}" disabled required />
            </div>
            <div class="info-block">
              <label for="total">Total de compra</label>
              <input type="text" id="total" name="total" th:value="${factura.total}" disabled required />
            </div>
          </div>

          <ol>
            <li th:each="detalle : ${detalles}">
              <span th:text="${detalle.producto.nombre}">Product Name</span>
              <span th:text="${detalle.cantidad}">Quantity</span>
              <span th:text="${detalle.producto.precio}">Unit.</span>
            </li>
          </ol>

          <div class="panel-actions">
            <button type="button" class="btn btn-primary" id="edit-btn">Editar Información</button>
            <button type="submit" class="btn btn-success" id="save-btn" style="display: none;">Guardar Cambios</button>
            <a href="/factura/dashboard" class="btn btn-secondary">Regresar</a>
          </div>
        </form>
      </div>
    </section>

    <script>
      const editBtn = document.getElementById("edit-btn");
      const saveBtn = document.getElementById("save-btn");
      const form = document.getElementById("user-form");
      const inputs = form.querySelectorAll("input:not([type='hidden'])");

      editBtn.addEventListener("click", () => {
        inputs.forEach(input => input.removeAttribute("disabled"));
        editBtn.style.display = "none";
        saveBtn.style.display = "inline-block";
      });
    </script>

  </div>
</html>
